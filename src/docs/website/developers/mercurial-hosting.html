<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <link href="../style.css" rel="stylesheet" type="text/css">
    <title>Hosting alternate mercurial repositories</title>
  </head>
  <body>

    <div id="logo">
      <h1>PETSc</h1>
    </div>

    <div id="header">
      <h1>Hosting alternate mercurial repositories</h1>
    </div>

    <hr>

    <div id="sidebar">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../download/index.html">Download</a></li>
        <li><a href="../features/index.html">Features</a></li>
        <li><a href="../documentation/index.html">Documentation</a></li>
        <li><a href="../publications/index.html">Applications/Publications</a></li>
        <li><a href="../miscellaneous/index.html">Miscellaneous</a></li>
        <li><a href="../miscellaneous/external.html">External Software</a></li>
        <li>
          <span class="current">Developers Site</span>
          <ul>
            <li><a href="index.html">Getting started</a></li>
            <li><a href="../documentation/changes/dev.html">Changes</a></li>
            <li><a href="http://www.mcs.anl.gov/petsc/petsc-dev/docs/index.html">Development copy of documentation</a></li>
            <li><a href="developers.pdf">Developers Instructions</a></li>
            <li><a href="projects.html">Proposed projects</a></li>
            <li><span class="current">Hosting mercurial repository</span></li>
          </ul>
        </li>
      </ul>
    </div>

    <div id="main">

      <p>Our repository site <a href="http://petsc.cs.iit.edu">http://petsc.cs.iit.edu</a>
        can ocassionally go offline. An alternate repository location where one could share [push/pull]
        commits is useful at such times. No data will be lost by switching.</p>

      <h2><a name="create-account">Create a bitbucket account (Mandatory)</h2>

      <ul>
        <li>Sign-up at <a href="https://bitbucket.org/account/signup/">
            https://bitbucket.org/account/signup/</a> and create an individual account:
          <a style="color: brown">YourUserName</a>.</li>

        <li>[Optional:] For ssh access - register your public ssh key at:
          <a style="color: purple">'YourName' -> 'Account' -> 'SSH keys'</a>.</li>

        <li>If you have a .edu email id - add it to:
          <a style="color: purple">'YourName'-> 'Account' -> 'Email adresses'</a>.
          If you were to host private repositories - this will enable you to add in over 5 users
          to such a repository.</li>
      </ul>

      <h2>Alternative location for petsc-dev and buildsystem</h2>

      <p>If the default petsc-dev or BuildSystem site is unavailable:
        <ul>
          <li> ask petsc-maint@mcs.anl.gov to enable write access for you (try it first, you may already have access).</li>
          <li> from your petsc-dev repository directory use
            <ul>
              <li><code style="color: red">hg pull https://YourUserName@bitbucket.org/petsc/petsc-dev</code></li>
              <li><code style="color: red">hg push https://YourUserName@bitbucket.org/petsc/petsc-dev</code></li>
            </ul>
          <li> from your BuildSystem repository directory use
            <ul>
              <li><code style="color: red">hg pull https://YourUserName@bitbucket.org/petsc/buildsystem</code></li>
              <li><code style="color: red">hg push https://YourUserName@bitbucket.org/petsc/buildsystem</code></li>
            </ul>
        </ul>

      <p>Once the outage is over - switch back to using petsc.cs.iit.edu with '<code style="color: red">hg push</code>'
        and '<code style="color: red">hg pull</code>'.</p>

      <h2>Sharing other repositories</h2>

      <h4>Setting up alternative repository for <a style="color: brown">reponame</a> (anyone can do this):</h4>

      <ul>
        <li> At bitbucket create a new repository <a style="color: brown">reponame</a> (must be lower case) at:
          <a style="color: purple">'Repositories' -> 'Create repository'</a>.</li>
        <li> from your current repository directory
          <ul>
            <li><code style="color: red">hg push https://YourUserName@bitbucket.org/YourUserName/reponame</code></li>
          </ul>
        <li>Go to <a style="color: purple">'Repositories' -> 'reponame' -> Admin -> 'Access management'</a>
          and add in users with their bitbucket UserName or invite them by their registered email address.</li>
      </ul>

      <h4>Using the alternative repository (created by AdminUserName):</h4>

      <ul>
        <li> ask repo admin to enable read/write access for you (if they have not done so)</li>
        <li> now you should be able to pull or push with the commands:
          <ul>
            <li><code style="color: red">hg pull https://YourUserName@bitbucket.org/AdminUserName/reponame</code></li>
            <li><code style="color: red">hg push https://YourUserName@bitbucket.org/AdminUserName/reponame</code></li>
          </ul>
      </ul>

      <p>Once the outage is over - switch back to using petsc.cs.iit.edu with '<code style="color: red">hg push</code>'
        and '<code style="color: red">hg pull</code>'</p>

    </div>

    <hr>

  </body>
</html>
