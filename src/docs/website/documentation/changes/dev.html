<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <link href="../../style.css" rel="stylesheet" type="text/css">
    <title>PETSc: Documentation: Changes: Development</title>
  </head>
  <body>

    <div id="logo">
      <h1>PETSc</h1>
    </div>

    <div id="header">
      <h1><!--begin-->Documentation: Changes: Development<!--end--></h1>
    </div>

    <hr>

    <div id="sidebar">
      <ul>
        <li><a href="../../index.html">Home</a></li>
        <li><a href="../../download/index.html">Download</a></li>
        <li><a href="../../features/index.html">Features</a></li>
        <li>
          <a href="../../documentation/index.html">Documentation</a>
          <ul>
            <li><a href="../index.html">Manual pages and Users Manual</a></li>
            <li><a href="../referencing.html">Referencing PETSc</a></li>
            <li><a href="../tutorials/index.html">Tutorials</a></li>
            <li><a href="../installation.html">Installation</a></li>
            <li><a href="../ams.html">AMS</a></li>
            <li>
              <a href="index.html">Changes</a>
              <ul>
                <li><span class="current">dev</span></li>
                <li><a href="32.html">3.2</a></li>
                <li><a href="31.html">3.1</a></li>
                <li><a href="300.html">3.0.0</a></li>
                <li><a href="233.html">2.3.3</a></li>
                <li><a href="232.html">2.3.2</a></li>
                <li><a href="231.html">2.3.1</a></li>
                <li><a href="230.html">2.3.0</a></li>
                <li><a href="221.html">2.2.1</a></li>
                <li><a href="220.html">2.2.0</a></li>
                <li><a href="216.html">2.1.6</a></li>
                <li><a href="215.html">2.1.5</a></li>
                <li><a href="213.html">2.1.3</a></li>
                <li><a href="212.html">2.1.2</a></li>
                <li><a href="211.html">2.1.1</a></li>
                <li><a href="21.html">2.1.0</a></li>
                <li><a href="2029.html">2.0.29</a></li>
                <li><a href="2028.html">2.0.28</a></li>
                <li><a href="2024.html">2.0.24</a></li>
                <li><a href="2022.html">2.0.22</a></li>
                <li><a href="2018-21.html">2.0.18-21</a></li>
                <li><a href="2017.html">2.0.17</a></li>
                <li><a href="2016.html">2.0.16</a></li>
                <li><a href="2015.html">2.0.15</a></li>
              </ul>
            </li>
            <li><a href="../bugreporting.html">Bug Reporting</a></li>
            <li><a href="../codemanagement.html">Code Management</a></li>
            <li><a href="../faq.html">FAQ</a></li>
            <li><a href="../copyright.html">License</a></li>
            <li><a href="../linearsolvertable.html">Linear Solver Table</a></li>
          </ul>
        </li>
        <li><a href="../../publications/index.html">Applications/Publications</a></li>
        <li><a href="../../miscellaneous/index.html">Miscellaneous</a></li>
        <li><a href="../../miscellaneous/external.html">External Software</a></li>
        <li><a href="../../developers/index.html">Developers Site</a></li>
      </ul>
    </div>

    <!--begin-->

    <style type="text/css">
      h2 {
        color: red;
      }

      h4 {
        font-weight: bold;
        text-decoration: underline;
      }
    </style>

    <div id="main">

      <div align="center">
        <h2><a name="CHANGES">CHANGES in the PETSc Development Version</a></h2>
      </div>

      <h4>General:</h4>

      <ul>
        <li>PetscBagLoad() now requires you previously created and registered all the records in the PETSc bag</li>
      </ul>

      <h4>Logging:</h4>
      <h4>config/configure.py:</h4>
      <h4>IS:</h4>
      <h4>PF:</h4>
      <h4>Vec:</h4>
      <ul>
        <li>VecCreateSeqWithArray() and VecCreateMPIWithArray() now take a blocksize argument before the local length</li>
        <li>VecSetBlockSize() cannot be called after VecCreateSeq() or VecCreateMPI() and must be called before VecSetUp() or VecSetFromOptions() or before either VecSetType() or VecSetSizes()</li>
      </ul>
      <h4>VecScatter:</h4>
      <h4>Mat:</h4>

      <ul>
        <li>Renamed MatNullSpaceAttach() to MatSetNullSpace()</li>
        <li>MatMult() no longer removes the nullspace set by MatSetNullSpace()</li>
        <li>Renamed MatMatMultTranspose() for C=A^T*B to MatTransposeMatMult()</li>
        <li>Added MatMatTransposeMult() for C=A*B^T</li>
        <li>Added MatRARt() for C=R*A*R^T</li>
        <li>Preallocation routines now automatically set MAT_NEW_NONZERO_ALLOCATION_ERR, if you intentionally preallocate less than necessary then use MatSetOption(mat,MAT_NEW_NONZERO_ALLOCATION_ERR,PETSC_FALSE) to disable the error generation.</li>
        <li> MatSetBlockSize() must be called before MatSetUp() or MatXXXXSetPreallocation() or block size defaults to 1 </li>
        <li> -mat_block_size is NOT processed by MatXXXXSetPreallocation() you MUST call MatSetFromOptions() before MatSetUp() to have it processed</li>
        <li>You MUST now call MatXXXSetPreallocation() or MatSetUp() on any matrix you create directly (not using DMCreateMatrix()) before calling MatSetValues(), MatSetValuesBlocked() etc.</li>
        <li>MatSetUpPreallocation() and MatPreallocated() are removed, use MatSetUp()</li>
        <li>MatPreallocateSymmetricInitialize() is removed, use MatPreallocateInitialize()</li>
        <li>MatCreateMPIAIJ(), MatCreateMPIBAIJ(), MatCreateMPISBAIJ(), MatCreateMPIDense() are now MatCreateAIJ(), MatCreateBAIJ(), MatCreateSBAIJ(), MatCreateDense(). Note that on a single process they have always created the sequential version of the matrix so this naming is more accurate. </li>
        <li>Renamed MatMerge_SeqsToMPI() to MatCreateMPIAIJSumSeqAIJ()</li>
        <li>Renamed MatMerge() to MatCreateMPIAIJConcatenateSeqAIJ()</li>
      </ul>

      <h4>PC:</h4>
      <ul>
        <li>Remove PCASASetDM(), use PCSetDM() instead.</li>
        <li>Add PCFieldSplitSetSchurFactType(), rename -pc_fieldsplit_set_schur_factorization_type to -pc_fieldsplit_set_schur_fact_type.</li>
      </ul>
      <h4>KSP:</h4>

      <ul>
        <li>KSPSetOperators() will automatically set the null space present on the input matrix</li>
      </ul>

      <h4>SNES:</h4>
      <ul>
        <li>Added SNESGetSNESLineSearch</li>
        <li>Changed default max_its and max_funcs for non-newton SNES solvers to 10000 and 30000 respectively</li>
        <li>Changed options and command-line arguments for SNESFAS to be in line with PCMG</li>
      </ul>

      <h4>SNESLineSearch:</h4>

      <ul>
        <li>SNESLineSearch object added</li>
        <li>The default SNESLineSearch of a SNES may be gotten with SNESGetSNESLineSearch(SNES snes, SNESLineSearch *linesearch)</li>
        <li>The linesearch type may be set with SNESLineSearchSetType() or -snes_linesearch_type</li>
        <li>The line search (and pre and post checks) is applied using SNESLineSearchApply()</li>
        <li>Pre/Post-check methods may be set with SNESLineSearchSetPre/PostCheck()</li>
        <li>The previous steplength may be accessed through SNESLineSearchSetLambda()</li>
        <li>The damping parameter may be set through SNESLineSearchSetDamping() or -snes_linesearch_damping</li>
        <li>Success of the line search is determined using SNESLineSearchGetSuccess()</li>
        <li>Custom linesearches may be built through SNESLINESEARCHSHELL,("shell") or by registering a new linesearch type with SNESLineSearchRegisterDynamic()</li>
        <li>SNESLINESEARCHBT,("bt") replaces SNES_LS_CUBIC and SNES_LS_QUADRATIC, and order may be set with SNESLineSearchSetOrder() or -snes_linesearch_order<quadratic,cubic></li>
        <li>SNESLINESEARCHBASIC,("basic") replaces SNES_LS_BASIC and SNES_LS_BASICNONORMS.  Norms may be turned off with SNESLineSearchSetComputeNorms() or -snes_linesearch_norms 0</li>
        <li>SNESLineSearchSetTolerances() replaces SNESLSSetParams(), with the former alpha parameter set with SNESLineSearchBTSetAlpha() or -snes_linesearch_alpha</li>
        <li>Added Line Search type SNESLINESEARCHL2,("l2") as the default for NRICHARDSON</li>
        <li>SNESLINESEARCHCP,("cp") added as the default line search method for SNESNCG and SNESQN</li>
      </ul>

      <h4>TS:</h4>

      <ul>
        <li>-ts_max_time changed to -ts_final_time</li>
        <li>TSDefaultComputeJacobian() and TSDefaultComputeJacobianColor() have been removed.
          Configure TS to use coloring with SNESSetJacobian().</li>
        <li>Added TSROSW for Rosenbrock-W methods.</li>
        <li>Added a common, extensible system for adaptive controllers, see TSGetAdapt().</li>
      </ul>

      <h4>DM/DA:</h4>

      <ul>
        <li>Added DMRedundant for managing globally coupled degrees of freedom.</li>
        <li>Removed DMCompositeAddArray(), use DMRedundantCreate() and DMCompositeAddDM().</li>

        <li>
          Renamed DMGetMatrix(), DMGetInterpolation(), DMGetInjection(), and
          DMGetColoring() to DMCreateMatrix(), etc for semantic consistency.
        </li>
        <li>The communicator argument to DMRefine() and DMCoarsen() can be MPI_COMM_NULL, but not PETSC_NULL, because the latter may not be the correct type.</li>
      </ul>

      <h4>DMMG:</h4>
      <h4>PetscViewer:</h4>
      <h4>SYS:</h4>
      <h4>AO:</h4>
      <h4>Sieve:</h4>
      <h4>Fortran:</h4>
      <ul>
        <li>PETSC_NULL_TRUTH is now PETSC_NULL_BOOL</li>
      </ul>

      <ul>
        <li>SNES line search type should be set by name with SNESLineSearchSetType rather than with SNESLineSearchSet</li>
      </ul>

      <h4><a href="http://www.mcs.anl.gov/petsc/miscellaneous/external.html">ExternalPackages</a>:</h4>
      <ul>
        <li>The Hypre interface was updated to 2.8.0b and now supports 64-bit integers.</li>
      </ul>
    </div>

    <!--end-->

    <hr>

  </body>
</html>
